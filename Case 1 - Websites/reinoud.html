<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>UMCG Hammer Smash ‚Üí AI Cloud</title>
  <style>
    :root{
      --bg1:#0b1220;
      --bg2:#070b13;
      --panel: rgba(255,255,255,0.06);
      --panel2: rgba(255,255,255,0.10);
      --text: rgba(255,255,255,0.88);
      --muted: rgba(255,255,255,0.62);
      --accent: #6ee7ff;
      --accent2:#a78bfa;
    }
    html,body{height:100%;}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color: var(--text);
      background: radial-gradient(1200px 700px at 30% 20%, rgba(110,231,255,0.12), transparent 60%),
                  radial-gradient(900px 600px at 70% 60%, rgba(167,139,250,0.12), transparent 55%),
                  linear-gradient(180deg, var(--bg1), var(--bg2));
      overflow:hidden;
    }
    .wrap{
      position:relative;
      height:100%;
      display:grid;
      grid-template-rows:auto 1fr auto;
    }
    header{
      padding:18px 22px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:12px;
    }
    .dot{
      width:12px;height:12px;border-radius:999px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      box-shadow: 0 0 18px rgba(110,231,255,0.45);
    }
    h1{
      font-size:16px;
      margin:0;
      font-weight:650;
      letter-spacing:0.2px;
    }
    .hint{
      font-size:13px;
      color:var(--muted);
      max-width:580px;
      line-height:1.35;
    }
    .controls{
      display:flex;
      align-items:center;
      gap:10px;
    }
    button{
      appearance:none;
      border:1px solid rgba(255,255,255,0.14);
      background: linear-gradient(180deg, rgba(255,255,255,0.10), rgba(255,255,255,0.06));
      color: var(--text);
      padding:10px 12px;
      border-radius:14px;
      cursor:pointer;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
      user-select:none;
      font-weight:600;
      letter-spacing:.2px;
    }
    button:hover{
      border-color: rgba(255,255,255,0.22);
      background: linear-gradient(180deg, rgba(255,255,255,0.14), rgba(255,255,255,0.07));
    }
    button:active{ transform: translateY(1px) scale(0.99); }

    main{
      position:relative;
      display:grid;
      place-items:center;
    }

    .stage{
      width:min(920px, 94vw);
      height:min(560px, 70vh);
      border-radius:26px;
      background: linear-gradient(180deg, rgba(255,255,255,0.07), rgba(255,255,255,0.03));
      border:1px solid rgba(255,255,255,0.12);
      box-shadow: 0 24px 90px rgba(0,0,0,0.45);
      position:relative;
      overflow:hidden;
    }

    canvas{ position:absolute; inset:0; width:100%; height:100%; }

    .hud{
      position:absolute;
      left:18px; right:18px; top:16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      pointer-events:none;
    }
    .meter{
      pointer-events:none;
      background: rgba(0,0,0,0.22);
      border:1px solid rgba(255,255,255,0.12);
      border-radius:999px;
      padding:6px 10px;
      display:flex;
      align-items:center;
      gap:10px;
      min-width:240px;
      backdrop-filter: blur(8px);
    }
    .bar{
      height:8px;
      flex:1;
      background: rgba(255,255,255,0.10);
      border-radius:999px;
      overflow:hidden;
    }
    .fill{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      border-radius:999px;
      box-shadow: 0 0 18px rgba(110,231,255,0.35);
      transition: width .18s ease;
    }
    .meter span{
      font-size:12px;
      color: rgba(255,255,255,0.72);
      font-weight:650;
      letter-spacing:0.3px;
    }

    .badge{
      pointer-events:none;
      padding:8px 10px;
      border-radius:999px;
      background: rgba(0,0,0,0.22);
      border:1px solid rgba(255,255,255,0.12);
      font-size:12px;
      color:rgba(255,255,255,0.72);
      backdrop-filter: blur(8px);
      white-space:nowrap;
    }

    footer{
      padding:14px 22px 18px;
      color:var(--muted);
      font-size:12px;
      display:flex;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }
    a{ color: rgba(110,231,255,0.85); text-decoration:none; }
    a:hover{ text-decoration:underline; }

    .toast{
      position:absolute;
      left:50%;
      top:60%;
      transform:translate(-50%,-50%);
      padding:12px 14px;
      border-radius:16px;
      background: rgba(0,0,0,0.35);
      border:1px solid rgba(255,255,255,0.14);
      backdrop-filter: blur(10px);
      font-weight:650;
      letter-spacing:.2px;
      opacity:0;
      transition: opacity .25s ease, transform .25s ease;
      pointer-events:none;
    }
    .toast.show{
      opacity:1;
      transform:translate(-50%,-52%);
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="dot"></div>
        <div>
          <h1>UMCG Smash ‚Üí AI Cloud</h1>
          <div class="hint">Klik op het pictogram in het midden (of druk op spatie) om met de hamer te slaan. Na genoeg hits krijg je een ‚Äúexplosie-wolk‚Äù waar AI-projecten uit komen.</div>
        </div>
      </div>
      <div class="controls">
        <button id="btnReset" type="button">Reset</button>
        <button id="btnRandomize" type="button">Shuffle projecten</button>
      </div>
    </header>

    <main>
      <div class="stage" id="stage">
        <canvas id="c"></canvas>

        <div class="hud">
          <div class="meter">
            <span>SMASH</span>
            <div class="bar"><div class="fill" id="fill"></div></div>
            <span id="hitsLabel">0</span>
          </div>
          <div class="badge" id="status">Doel: laat de AI-wolk ‚Äúontploffen‚Äù</div>
        </div>

        <div class="toast" id="toast">üí• AI-PROJECTEN!</div>
      </div>
    </main>

    <footer>
      <div>Tip: wil je het echte logo? Vervang de ‚ÄúUMCG‚Äù cirkel in de code door een image (zie commentaar in JS).</div>
      <div>Gemaakt als demo-animatie (geen externe libraries).</div>
    </footer>
  </div>

<script>
(() => {
  const canvas = document.getElementById('c');
  const stage = document.getElementById('stage');
  const ctx = canvas.getContext('2d');
  const fill = document.getElementById('fill');
  const hitsLabel = document.getElementById('hitsLabel');
  const status = document.getElementById('status');
  const toast = document.getElementById('toast');

  const btnReset = document.getElementById('btnReset');
  const btnRandomize = document.getElementById('btnRandomize');

  const DPR = () => Math.max(1, Math.min(2, window.devicePixelRatio || 1));

  let w=0,h=0, dpr=1;
  function resize(){
    const r = stage.getBoundingClientRect();
    dpr = DPR();
    w = Math.floor(r.width);
    h = Math.floor(r.height);
    canvas.width = Math.floor(w * dpr);
    canvas.height = Math.floor(h * dpr);
    canvas.style.width = w + 'px';
    canvas.style.height = h + 'px';
    ctx.setTransform(dpr,0,0,dpr,0,0);
  }
  window.addEventListener('resize', resize);
  resize();

  const rand = (a,b)=>a+Math.random()*(b-a);
  const clamp=(x,a,b)=>Math.max(a,Math.min(b,x));

  const projectsDefault = [
    "PUSH (stroke AI triage)",
    "GREENLIGHT (CT-guided platform)",
    "AXIOM (autonome guidewire)",
    "Dose reduction + AI enhancement",
    "CBCT perfusion analytics",
    "Plaque vulnerability imaging",
    "TIPS outcome prediction",
    "Workflow orchestration (RO)",
    "Smart needle guidance",
    "Value-based IR dashboard",
    "Robotic assistance integration",
    "Photon-counting plaque mapping"
  ];

  let projects = [...projectsDefault];

  // Core objects
  const icon = {
    x: 0, y: 0, r: 66,
    wobble: 0,
    cracks: 0,
    draw(){
      // shadow
      ctx.save();
      ctx.translate(this.x, this.y);
      ctx.beginPath();
      ctx.ellipse(0, this.r+22, this.r*0.95, 18, 0, 0, Math.PI*2);
      ctx.fillStyle = 'rgba(0,0,0,0.30)';
      ctx.fill();

      // body
      const grad = ctx.createLinearGradient(-this.r, -this.r, this.r, this.r);
      grad.addColorStop(0, 'rgba(110,231,255,0.20)');
      grad.addColorStop(1, 'rgba(167,139,250,0.20)');

      ctx.rotate(this.wobble);
      ctx.beginPath();
      ctx.arc(0, 0, this.r, 0, Math.PI*2);
      ctx.fillStyle = 'rgba(255,255,255,0.06)';
      ctx.fill();
      ctx.lineWidth = 2;
      ctx.strokeStyle = 'rgba(255,255,255,0.18)';
      ctx.stroke();

      ctx.beginPath();
      ctx.arc(0, 0, this.r-6, 0, Math.PI*2);
      ctx.fillStyle = grad;
      ctx.fill();

      // label
      ctx.font = '700 22px ui-sans-serif, system-ui';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillStyle = 'rgba(255,255,255,0.88)';
      ctx.fillText('UMCG', 0, 1);

      // subtle shine
      ctx.beginPath();
      ctx.arc(-18, -18, this.r*0.55, 0, Math.PI*2);
      ctx.fillStyle = 'rgba(255,255,255,0.05)';
      ctx.fill();

      // cracks
      if(this.cracks>0){
        ctx.strokeStyle = 'rgba(255,255,255,0.20)';
        ctx.lineWidth = 1.6;
        for(let i=0;i<this.cracks;i++){
          const a = rand(-1.2, 1.2);
          const len = rand(this.r*0.35, this.r*0.82);
          ctx.beginPath();
          ctx.moveTo(0, 0);
          ctx.lineTo(Math.cos(a)*len, Math.sin(a)*len);
          ctx.stroke();
          // branch
          ctx.beginPath();
          const bx = Math.cos(a)*len*0.62;
          const by = Math.sin(a)*len*0.62;
          ctx.moveTo(bx, by);
          const ba = a + rand(-0.7, 0.7);
          ctx.lineTo(bx + Math.cos(ba)*len*0.22, by + Math.sin(ba)*len*0.22);
          ctx.stroke();
        }
      }

      ctx.restore();
    },
    hit(px,py){
      const dx=px-this.x, dy=py-this.y;
      return (dx*dx+dy*dy) <= this.r*this.r;
    }
  };

  const hammer = {
    x: 0, y: 0,
    angle: -0.9,
    swing: 0,
    swinging: false,
    power: 0,
    draw(){
      ctx.save();
      ctx.translate(this.x, this.y);
      ctx.rotate(this.angle + this.swing);

      // handle
      ctx.lineCap = 'round';
      ctx.lineWidth = 12;
      ctx.strokeStyle = 'rgba(255,255,255,0.22)';
      ctx.beginPath();
      ctx.moveTo(0, 0);
      ctx.lineTo(110, 160);
      ctx.stroke();

      ctx.lineWidth = 8;
      ctx.strokeStyle = 'rgba(110,231,255,0.28)';
      ctx.beginPath();
      ctx.moveTo(6, 6);
      ctx.lineTo(112, 162);
      ctx.stroke();

      // head
      ctx.fillStyle = 'rgba(255,255,255,0.14)';
      ctx.strokeStyle = 'rgba(255,255,255,0.20)';
      ctx.lineWidth = 2;
      roundRect(-30, -32, 78, 40, 12);
      ctx.fill();
      ctx.stroke();

      ctx.fillStyle = 'rgba(0,0,0,0.18)';
      roundRect(-28, -30, 74, 14, 10);
      ctx.fill();

      ctx.restore();
    }
  };

  function roundRect(x,y,w,h,r){
    const rr = Math.min(r, w/2, h/2);
    ctx.beginPath();
    ctx.moveTo(x+rr, y);
    ctx.arcTo(x+w, y, x+w, y+h, rr);
    ctx.arcTo(x+w, y+h, x, y+h, rr);
    ctx.arcTo(x, y+h, x, y, rr);
    ctx.arcTo(x, y, x+w, y, rr);
    ctx.closePath();
  }

  // Particles & tags
  const particles = [];
  const tags = [];

  function spawnExplosion(){
    toast.classList.add('show');
    setTimeout(()=>toast.classList.remove('show'), 900);

    // cloud particles
    const count = 160;
    for(let i=0;i<count;i++){
      const a = rand(0, Math.PI*2);
      const sp = rand(1.2, 5.2);
      particles.push({
        x: icon.x, y: icon.y-8,
        vx: Math.cos(a)*sp,
        vy: Math.sin(a)*sp - rand(0.4, 2.0),
        life: rand(50, 100),
        r: rand(2, 7),
        puff: rand(0.2, 1.0)
      });
    }

    // project tags
    const shuffled = [...projects].sort(()=>Math.random()-0.5);
    const take = Math.min(10, shuffled.length);
    for(let i=0;i<take;i++){
      const a = rand(-Math.PI*0.95, -Math.PI*0.05);
      const sp = rand(1.8, 4.2);
      tags.push({
        text: shuffled[i],
        x: icon.x, y: icon.y-14,
        vx: Math.cos(a)*sp,
        vy: Math.sin(a)*sp,
        rot: rand(-0.2, 0.2),
        vr: rand(-0.02, 0.02),
        life: rand(240, 340),
        scale: rand(0.92, 1.06),
        wob: rand(0, Math.PI*2)
      });
    }
  }

  // Game state
  let hits = 0;
  const hitsToExplode = 7;
  let exploded = false;
  let shake = 0;

  function reset(){
    hits = 0;
    exploded = false;
    icon.cracks = 0;
    particles.length = 0;
    tags.length = 0;
    shake = 0;
    status.textContent = "Doel: laat de AI-wolk ‚Äúontploffen‚Äù";
    updateHUD();
  }

  function updateHUD(){
    const p = clamp(hits / hitsToExplode, 0, 1);
    fill.style.width = (p*100).toFixed(0) + '%';
    hitsLabel.textContent = String(hits);
  }

  function doHit(){
    if(exploded) return;

    hits++;
    icon.wobble = rand(-0.12, 0.12);
    icon.cracks = Math.min(6, Math.floor(hits * 0.85));
    shake = 10;

    updateHUD();

    if(hits >= hitsToExplode){
      exploded = true;
      status.textContent = "Succes: AI-wolk vrijgelaten";
      spawnExplosion();
    }else{
      status.textContent = `Nog ${hitsToExplode - hits} hits`;
    }
  }

  // Input
  function pointerToStage(e){
    const r = stage.getBoundingClientRect();
    const x = (e.clientX - r.left);
    const y = (e.clientY - r.top);
    return {x,y};
  }

  stage.addEventListener('pointerdown', (e)=>{
    const p = pointerToStage(e);
    if(icon.hit(p.x,p.y)){
      swingHammer(p.x,p.y);
    }else{
      // ook slaan naast het icoon: hamer slaat, maar telt niet
      swingHammer(p.x,p.y,false);
    }
  });

  window.addEventListener('keydown', (e)=>{
    if(e.code === 'Space'){
      e.preventDefault();
      swingHammer(icon.x, icon.y, true);
    }
    if(e.code === 'KeyR'){
      reset();
    }
  });

  btnReset.addEventListener('click', reset);
  btnRandomize.addEventListener('click', ()=>{
    projects = [...projects].sort(()=>Math.random()-0.5);
    status.textContent = "Projecten geshuffeld";
    setTimeout(()=>{ if(!exploded) status.textContent = `Nog ${Math.max(0, hitsToExplode - hits)} hits`; }, 700);
  });

  function swingHammer(px,py,counts=true){
    if(hammer.swinging) return;
    hammer.swinging = true;

    const start = -0.9;
    const end = 0.55;
    const duration = 170; // ms
    const t0 = performance.now();

    const hx = px - 120;
    const hy = py - 170;
    hammer.x = clamp(hx, 80, w-80);
    hammer.y = clamp(hy, 40, h-40);

    const tick = (t)=>{
      const u = clamp((t - t0)/duration, 0, 1);
      // ease in/out
      const eio = u<0.5 ? 2*u*u : 1 - Math.pow(-2*u+2,2)/2;
      hammer.swing = (start + (end - start)*eio);

      if(u < 1){
        requestAnimationFrame(tick);
      }else{
        hammer.swinging = false;
        hammer.swing = 0;
        // check "impact moment" roughly at end
        if(counts && icon.hit(px,py)) doHit();
      }
    };
    requestAnimationFrame(tick);
  }

  // Layout positions
  function layout(){
    icon.x = w*0.50;
    icon.y = h*0.58;
    // default hammer position
    hammer.x = w*0.28;
    hammer.y = h*0.22;
  }
  layout();
  window.addEventListener('resize', ()=>{ resize(); layout(); });

  // Render loop
  function drawBackground(){
    // subtle grid
    ctx.save();
    ctx.globalAlpha = 0.35;
    ctx.strokeStyle = 'rgba(255,255,255,0.05)';
    ctx.lineWidth = 1;
    const step = 46;
    const ox = (performance.now()*0.01) % step;
    const oy = (performance.now()*0.012) % step;
    for(let x=-step; x<w+step; x+=step){
      ctx.beginPath();
      ctx.moveTo(x+ox, 0);
      ctx.lineTo(x+ox, h);
      ctx.stroke();
    }
    for(let y=-step; y<h+step; y+=step){
      ctx.beginPath();
      ctx.moveTo(0, y+oy);
      ctx.lineTo(w, y+oy);
      ctx.stroke();
    }
    ctx.restore();
  }

  function updateParticles(){
    for(let i=particles.length-1;i>=0;i--){
      const p = particles[i];
      p.x += p.vx;
      p.y += p.vy;
      p.vx *= 0.985;
      p.vy = p.vy*0.985 + 0.02; // tiny gravity
      p.life -= 1;
      p.r *= 1.003;
      if(p.life <= 0) particles.splice(i,1);
    }
  }

  function drawParticles(){
    ctx.save();
    for(const p of particles){
      const a = clamp(p.life/100, 0, 1) * 0.65;
      ctx.globalAlpha = a;
      const g = ctx.createRadialGradient(p.x,p.y,0,p.x,p.y,p.r*3.2);
      g.addColorStop(0, 'rgba(255,255,255,0.20)');
      g.addColorStop(1, 'rgba(255,255,255,0.00)');
      ctx.fillStyle = g;
      ctx.beginPath();
      ctx.arc(p.x,p.y,p.r*3.2,0,Math.PI*2);
      ctx.fill();
    }
    ctx.restore();
  }

  function updateTags(){
    for(let i=tags.length-1;i>=0;i--){
      const t = tags[i];
      t.wob += 0.035;
      t.x += t.vx + Math.sin(t.wob)*0.08;
      t.y += t.vy + Math.cos(t.wob)*0.05;
      t.vx *= 0.992;
      t.vy = t.vy*0.992 + 0.015;
      t.rot += t.vr;
      t.life -= 1;
      if(t.life <= 0) tags.splice(i,1);
    }
  }

  function drawTags(){
    ctx.save();
    for(const t of tags){
      const alpha = clamp(t.life/280, 0, 1);
      ctx.globalAlpha = 0.9 * alpha;

      ctx.translate(t.x, t.y);
      ctx.rotate(t.rot);

      const padX = 12, padY = 8;
      ctx.font = `650 ${Math.round(13*t.scale)}px ui-sans-serif, system-ui`;
      const metrics = ctx.measureText(t.text);
      const tw = metrics.width;
      const boxW = tw + padX*2;
      const boxH = 18 + padY;

      // glow
      ctx.shadowColor = 'rgba(110,231,255,0.18)';
      ctx.shadowBlur = 18;

      // pill
      ctx.fillStyle = 'rgba(0,0,0,0.28)';
      ctx.strokeStyle = 'rgba(255,255,255,0.14)';
      ctx.lineWidth = 1;
      roundRect(-boxW/2, -boxH/2, boxW, boxH, 999);
      ctx.fill();
      ctx.stroke();

      // text
      ctx.shadowBlur = 0;
      ctx.fillStyle = 'rgba(255,255,255,0.88)';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText(t.text, 0, 0.5);

      ctx.setTransform(dpr,0,0,dpr,0,0); // reset transform in a safe way? no, we used translate.
      // restore via ctx.restore after loop, so we need manual restore per tag
      ctx.restore();
      ctx.save();
    }
    ctx.restore();
  }

  function drawImpactRing(){
    if(shake <= 0) return;
    const s = shake;
    ctx.save();
    ctx.globalAlpha = clamp(s/10, 0, 1) * 0.35;
    ctx.strokeStyle = 'rgba(110,231,255,0.55)';
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.arc(icon.x, icon.y, icon.r + (10 - s)*7, 0, Math.PI*2);
    ctx.stroke();
    ctx.restore();
  }

  let last = performance.now();
  function loop(now){
    const dt = Math.min(32, now - last);
    last = now;

    // screen shake
    if(shake > 0) shake = Math.max(0, shake - dt*0.03);
    const sx = (Math.random()-0.5) * shake;
    const sy = (Math.random()-0.5) * shake;

    ctx.clearRect(0,0,w,h);

    ctx.save();
    ctx.translate(sx, sy);

    drawBackground();

    // subtle vignette
    ctx.save();
    const vg = ctx.createRadialGradient(w*0.5,h*0.6, 80, w*0.5,h*0.6, Math.max(w,h)*0.8);
    vg.addColorStop(0, 'rgba(0,0,0,0)');
    vg.addColorStop(1, 'rgba(0,0,0,0.35)');
    ctx.fillStyle = vg;
    ctx.fillRect(0,0,w,h);
    ctx.restore();

    // particles behind
    updateParticles();
    drawParticles();

    // icon
    icon.wobble *= 0.90;
    icon.draw();

    drawImpactRing();

    // tags in front
    updateTags();
    drawTags();

    // hammer
    hammer.draw();

    ctx.restore();

    requestAnimationFrame(loop);
  }
  requestAnimationFrame(loop);

  reset();

  // Optioneel: als je een echt logo wilt gebruiken, kun je hier een Image laden en in icon.draw()
  // de cirkel vervangen door ctx.drawImage(logo, -r, -r, 2r, 2r).
})();
</script>
</body>
</html>
