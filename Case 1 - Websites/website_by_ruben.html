<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Git Workflow Interactive Guide</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&family=Syne:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0a0a0f;
            --bg-card: #12121a;
            --bg-elevated: #1a1a25;
            --accent-cyan: #00d4ff;
            --accent-magenta: #ff006e;
            --accent-yellow: #ffd60a;
            --accent-green: #00ff88;
            --accent-orange: #ff9500;
            --text-primary: #ffffff;
            --text-secondary: #8888aa;
            --border-subtle: rgba(255,255,255,0.08);
            --glow-cyan: 0 0 30px rgba(0,212,255,0.3);
            --glow-magenta: 0 0 30px rgba(255,0,110,0.3);
            --glow-green: 0 0 30px rgba(0,255,136,0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Animated background */
        .bg-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            background: 
                radial-gradient(circle at 20% 20%, rgba(0,212,255,0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255,0,110,0.05) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(0,255,136,0.03) 0%, transparent 70%);
        }

        .grid-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            background-image: 
                linear-gradient(rgba(255,255,255,0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255,255,255,0.02) 1px, transparent 1px);
            background-size: 50px 50px;
        }

        /* Header */
        header {
            position: relative;
            z-index: 10;
            padding: 80px 20px;
            text-align: center;
        }

        .logo {
            display: inline-flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
        }

        .logo-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-magenta));
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            box-shadow: var(--glow-cyan);
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        h1 {
            font-family: 'Syne', sans-serif;
            font-size: clamp(2.5rem, 6vw, 4.5rem);
            font-weight: 800;
            background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-cyan) 50%, var(--accent-magenta) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
            letter-spacing: -0.02em;
        }

        .subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto;
        }

        /* Main content */
        main {
            position: relative;
            z-index: 10;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px 100px;
        }

        /* Interactive Diagram Section */
        .diagram-section {
            margin-bottom: 80px;
        }

        .section-title {
            font-family: 'Syne', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 40px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .section-title::before {
            content: '';
            width: 40px;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-cyan), var(--accent-magenta));
            border-radius: 2px;
        }

        /* Git Areas Visualization */
        .git-visualization {
            background: var(--bg-card);
            border-radius: 24px;
            padding: 40px;
            border: 1px solid var(--border-subtle);
            position: relative;
            overflow: hidden;
        }

        .git-visualization::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-cyan), var(--accent-green), var(--accent-yellow), var(--accent-magenta));
        }

        .areas-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 40px;
        }

        @media (max-width: 900px) {
            .areas-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 500px) {
            .areas-container {
                grid-template-columns: 1fr;
            }
        }

        .area-box {
            background: var(--bg-elevated);
            border-radius: 16px;
            padding: 25px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            min-height: 280px;
        }

        .area-box::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent 0%, rgba(255,255,255,0.02) 100%);
            pointer-events: none;
        }

        .area-box:hover {
            transform: translateY(-5px);
        }

        .area-box.working { border-color: var(--accent-cyan); box-shadow: var(--glow-cyan); }
        .area-box.staging { border-color: var(--accent-yellow); box-shadow: 0 0 30px rgba(255,214,10,0.3); }
        .area-box.local { border-color: var(--accent-green); box-shadow: var(--glow-green); }
        .area-box.remote { border-color: var(--accent-magenta); box-shadow: var(--glow-magenta); }

        .area-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 15px;
        }

        .area-box.working .area-icon { background: rgba(0,212,255,0.2); }
        .area-box.staging .area-icon { background: rgba(255,214,10,0.2); }
        .area-box.local .area-icon { background: rgba(0,255,136,0.2); }
        .area-box.remote .area-icon { background: rgba(255,0,110,0.2); }

        .area-name {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .area-box.working .area-name { color: var(--accent-cyan); }
        .area-box.staging .area-name { color: var(--accent-yellow); }
        .area-box.local .area-name { color: var(--accent-green); }
        .area-box.remote .area-name { color: var(--accent-magenta); }

        .area-description {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .file-list {
            margin-top: 15px;
            height: 120px;
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
            padding: 10px;
            overflow-y: auto;
            flex-grow: 1;
        }

        .file-item {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            padding: 6px 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 4px;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
            animation: fileAppear 0.3s ease;
        }

        @keyframes fileAppear {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .file-item .status {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .file-item.modified .status { background: var(--accent-yellow); }
        .file-item.new .status { background: var(--accent-green); }
        .file-item.deleted .status { background: var(--accent-magenta); }

        .file-item .edit-btn {
            margin-left: auto;
            background: rgba(255,255,255,0.1);
            border: none;
            border-radius: 4px;
            padding: 2px 8px;
            font-size: 0.7rem;
            color: var(--text-secondary);
            cursor: pointer;
            font-family: 'JetBrains Mono', monospace;
            transition: all 0.2s ease;
        }

        .file-item .edit-btn:hover {
            background: var(--accent-cyan);
            color: var(--bg-dark);
        }

        .empty-state {
            color: var(--text-secondary);
            font-size: 0.8rem;
            font-style: italic;
            padding: 10px;
            text-align: center;
        }

        .branch-indicator {
            border-bottom: 1px solid var(--border-subtle);
            padding-bottom: 8px;
            margin-bottom: 8px;
        }

        /* Command Overview Section */
        .command-overview-section {
            margin-bottom: 80px;
        }

        .command-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .overview-category {
            background: var(--bg-card);
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid var(--border-subtle);
        }

        .overview-header {
            padding: 15px 20px;
            font-weight: 600;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .overview-header.setup { background: linear-gradient(135deg, rgba(0,212,255,0.2), rgba(0,212,255,0.05)); color: var(--accent-cyan); }
        .overview-header.basic { background: linear-gradient(135deg, rgba(0,255,136,0.2), rgba(0,255,136,0.05)); color: var(--accent-green); }
        .overview-header.branching { background: linear-gradient(135deg, rgba(255,214,10,0.2), rgba(255,214,10,0.05)); color: var(--accent-yellow); }
        .overview-header.remote { background: linear-gradient(135deg, rgba(255,0,110,0.2), rgba(255,0,110,0.05)); color: var(--accent-magenta); }
        .overview-header.undo { background: linear-gradient(135deg, rgba(255,149,0,0.2), rgba(255,149,0,0.05)); color: var(--accent-orange); }

        .overview-icon {
            font-size: 1.2rem;
        }

        .overview-commands {
            padding: 15px;
        }

        .overview-cmd {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 10px;
            border-radius: 6px;
            margin-bottom: 5px;
            transition: background 0.2s ease;
        }

        .overview-cmd:hover {
            background: rgba(255,255,255,0.05);
        }

        .overview-cmd code {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: var(--accent-cyan);
            background: rgba(0,212,255,0.1);
            padding: 3px 8px;
            border-radius: 4px;
        }

        .overview-cmd span {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        /* Branch Visualization Section */
        .branch-viz-section {
            margin-bottom: 80px;
        }

        .branch-viz-container {
            background: var(--bg-card);
            border-radius: 24px;
            padding: 30px;
            border: 1px solid var(--border-subtle);
        }

        .branch-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 25px;
        }

        .branch-btn {
            padding: 10px 18px;
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .branch-btn:hover:not(:disabled) {
            border-color: var(--accent-cyan);
            background: rgba(0,212,255,0.1);
        }

        .branch-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .branch-canvas-container {
            background: var(--bg-dark);
            border-radius: 12px;
            padding: 20px;
            overflow-x: auto;
            margin-bottom: 20px;
        }

        #branch-canvas {
            display: block;
            margin: 0 auto;
        }

        .branch-legend {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-bottom: 15px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .legend-dot {
            width: 14px;
            height: 14px;
            border-radius: 50%;
        }

        .legend-dot.main { background: var(--accent-cyan); }
        .legend-dot.feature { background: var(--accent-yellow); }
        .legend-dot.develop { background: var(--accent-green); }
        .legend-dot.hotfix { background: var(--accent-magenta); }
        .legend-dot.release { background: var(--accent-orange); }
        .legend-dot.head { background: #fff; box-shadow: 0 0 0 3px rgba(255,255,255,0.3); }
        .legend-dot.merge { background: linear-gradient(135deg, var(--accent-cyan), var(--accent-yellow)); }

        .branch-explanation {
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.9rem;
            padding: 15px;
            background: var(--bg-elevated);
            border-radius: 8px;
        }

        .branch-controls-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
            align-items: flex-end;
        }

        .control-group {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 10px;
        }

        .control-group label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .control-group select {
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: 6px;
            padding: 8px 12px;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            cursor: pointer;
        }

        .control-group select:focus {
            outline: none;
            border-color: var(--accent-cyan);
        }

        .branch-name-input {
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: 6px;
            padding: 8px 12px;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            width: 140px;
        }

        .branch-name-input:focus {
            outline: none;
            border-color: var(--accent-cyan);
        }

        .branch-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .branch-btn.primary {
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-green));
            color: var(--bg-dark);
            font-weight: 600;
        }

        .branch-btn.primary:hover {
            box-shadow: var(--glow-cyan);
        }

        .viz-layout {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 900px) {
            .viz-layout {
                grid-template-columns: 1fr;
            }
        }

        .command-log {
            background: var(--bg-dark);
            border-radius: 12px;
            border: 1px solid var(--border-subtle);
            display: flex;
            flex-direction: column;
            max-height: 390px;
        }

        .command-log-header {
            padding: 12px 15px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--accent-cyan);
            border-bottom: 1px solid var(--border-subtle);
            background: var(--bg-elevated);
            border-radius: 12px 12px 0 0;
        }

        .command-log-body {
            padding: 15px;
            overflow-y: auto;
            flex: 1;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
        }

        .cmd-entry {
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .cmd-entry:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .cmd-entry .cmd-text {
            color: var(--accent-green);
            margin-bottom: 4px;
        }

        .cmd-entry .cmd-output {
            color: var(--text-secondary);
            font-size: 0.75rem;
            padding-left: 10px;
        }

        .branch-state {
            display: flex;
            flex-wrap: wrap;
            gap: 25px;
            padding: 15px 20px;
            background: var(--bg-elevated);
            border-radius: 8px;
            margin-top: 15px;
        }

        .state-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .state-label {
            color: var(--text-secondary);
        }

        .state-item span:last-child {
            color: var(--accent-cyan);
            font-family: 'JetBrains Mono', monospace;
        }

        /* Command Flow Arrows */
        .flow-commands {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 30px;
            padding-top: 30px;
            border-top: 1px solid var(--border-subtle);
        }

        .flow-arrow {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 15px 20px;
            background: var(--bg-elevated);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid var(--border-subtle);
        }

        .flow-arrow:hover {
            transform: scale(1.05);
            border-color: var(--accent-cyan);
        }

        .flow-arrow.active {
            border-color: var(--accent-green);
            box-shadow: var(--glow-green);
        }

        .flow-arrow .cmd {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: var(--accent-cyan);
            font-weight: 600;
        }

        .flow-arrow .direction {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        /* Add file control */
        .add-file-control {
            display: flex;
            gap: 10px;
            padding: 10px 15px;
            background: var(--bg-elevated);
            border-radius: 12px;
            border: 1px dashed var(--accent-cyan);
            align-items: center;
        }

        .file-input {
            background: var(--bg-dark);
            border: 1px solid var(--border-subtle);
            border-radius: 6px;
            padding: 8px 12px;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            width: 140px;
            outline: none;
            transition: border-color 0.2s ease;
        }

        .file-input:focus {
            border-color: var(--accent-cyan);
        }

        .file-input::placeholder {
            color: var(--text-secondary);
        }

        .add-file-btn {
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-green));
            border: none;
            border-radius: 6px;
            padding: 8px 14px;
            color: var(--bg-dark);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .add-file-btn:hover {
            transform: scale(1.05);
            box-shadow: var(--glow-cyan);
        }

        /* Interactive Terminal */
        .terminal-section {
            margin-bottom: 80px;
        }

        .terminal {
            background: #0d0d14;
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid var(--border-subtle);
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }

        .terminal-header {
            background: var(--bg-elevated);
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .terminal-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .terminal-dot.red { background: #ff5f56; }
        .terminal-dot.yellow { background: #ffbd2e; }
        .terminal-dot.green { background: #27c93f; }

        .terminal-title {
            flex: 1;
            text-align: center;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .terminal-body {
            padding: 25px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            min-height: 300px;
            max-height: 400px;
            overflow-y: auto;
        }

        .terminal-line {
            margin-bottom: 8px;
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .terminal-line .prompt {
            color: var(--accent-green);
        }

        .terminal-line .command {
            color: var(--accent-cyan);
        }

        .terminal-line .output {
            color: var(--text-secondary);
            padding-left: 20px;
            width: 100%;
        }

        .terminal-line .success {
            color: var(--accent-green);
        }

        .terminal-line .error {
            color: var(--accent-magenta);
        }

        .terminal-input-line {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
        }

        .terminal-input-line .prompt {
            color: var(--accent-green);
        }

        #terminal-input {
            flex: 1;
            background: transparent;
            border: none;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            outline: none;
        }

        .cursor-blink {
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        /* Commands Reference */
        .commands-section {
            margin-bottom: 80px;
        }

        .commands-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }

        .command-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 25px;
            border: 1px solid var(--border-subtle);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .command-card:hover {
            border-color: var(--accent-cyan);
            transform: translateY(-3px);
        }

        .command-card.expanded {
            grid-column: span 2;
        }

        @media (max-width: 750px) {
            .command-card.expanded {
                grid-column: span 1;
            }
        }

        .command-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .command-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-magenta));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .command-name {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.1rem;
            color: var(--accent-cyan);
            font-weight: 600;
        }

        .command-desc {
            color: var(--text-secondary);
            font-size: 0.95rem;
            margin-bottom: 15px;
        }

        .command-syntax {
            background: var(--bg-dark);
            padding: 12px 15px;
            border-radius: 8px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: var(--accent-yellow);
            overflow-x: auto;
        }

        .command-examples {
            margin-top: 15px;
            display: none;
        }

        .command-card.expanded .command-examples {
            display: block;
        }

        .example-item {
            background: var(--bg-dark);
            padding: 10px 15px;
            border-radius: 6px;
            margin-bottom: 8px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
        }

        .example-item .code {
            color: var(--accent-cyan);
        }

        .example-item .desc {
            color: var(--text-secondary);
            font-size: 0.75rem;
            margin-top: 5px;
        }

        /* Workflow Animation */
        .workflow-section {
            margin-bottom: 80px;
        }

        .workflow-demo {
            background: var(--bg-card);
            border-radius: 24px;
            padding: 40px;
            border: 1px solid var(--border-subtle);
        }

        .workflow-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .workflow-btn {
            padding: 12px 24px;
            background: var(--bg-elevated);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .workflow-btn:hover {
            border-color: var(--accent-cyan);
            background: rgba(0,212,255,0.1);
        }

        .workflow-btn.primary {
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-magenta));
            border: none;
            font-weight: 600;
        }

        .workflow-btn.primary:hover {
            transform: scale(1.05);
            box-shadow: var(--glow-cyan);
        }

        .workflow-status {
            background: var(--bg-dark);
            border-radius: 12px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
        }

        .status-line {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--accent-green);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Cheat Sheet */
        .cheatsheet-section {
            margin-bottom: 80px;
        }

        .cheatsheet {
            background: var(--bg-card);
            border-radius: 24px;
            padding: 40px;
            border: 1px solid var(--border-subtle);
        }

        .cheatsheet-category {
            margin-bottom: 30px;
        }

        .category-title {
            font-family: 'Syne', sans-serif;
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .category-title .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .category-title.setup .dot { background: var(--accent-cyan); }
        .category-title.basic .dot { background: var(--accent-green); }
        .category-title.branching .dot { background: var(--accent-yellow); }
        .category-title.remote .dot { background: var(--accent-magenta); }
        .category-title.advanced .dot { background: var(--accent-orange); }

        .cheat-items {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 10px;
        }

        .cheat-item {
            background: var(--bg-elevated);
            padding: 12px 15px;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            gap: 5px;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .cheat-item:hover {
            background: rgba(0,212,255,0.1);
        }

        .cheat-item .cmd {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            color: var(--accent-cyan);
        }

        .cheat-item .desc {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* Footer */
        footer {
            position: relative;
            z-index: 10;
            text-align: center;
            padding: 40px 20px;
            border-top: 1px solid var(--border-subtle);
        }

        footer p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Tooltip */
        .tooltip {
            position: fixed;
            background: var(--bg-elevated);
            padding: 12px 16px;
            border-radius: 10px;
            font-size: 0.85rem;
            max-width: 300px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            border: 1px solid var(--border-subtle);
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .tooltip.visible {
            opacity: 1;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-dark);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--bg-elevated);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-secondary);
        }

        /* Animations */
        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .stagger-1 { animation-delay: 0.1s; opacity: 0; }
        .stagger-2 { animation-delay: 0.2s; opacity: 0; }
        .stagger-3 { animation-delay: 0.3s; opacity: 0; }
        .stagger-4 { animation-delay: 0.4s; opacity: 0; }

        /* Data flow animation */
        .data-packet {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 100;
        }

        .data-packet.cyan { background: var(--accent-cyan); box-shadow: var(--glow-cyan); }
        .data-packet.green { background: var(--accent-green); box-shadow: var(--glow-green); }
        .data-packet.magenta { background: var(--accent-magenta); box-shadow: var(--glow-magenta); }
    </style>
</head>
<body>
    <div class="bg-pattern"></div>
    <div class="grid-overlay"></div>

    <header>
        <div class="logo">
            <div class="logo-icon">‚éá</div>
        </div>
        <h1>Git Workflow</h1>
        <p class="subtitle">An interactive guide to understanding Git's architecture and most-used commands</p>
    </header>

    <main>
        <!-- Git Areas Visualization -->
        <section class="diagram-section fade-in stagger-1">
            <h2 class="section-title">The Four Areas of Git</h2>
            <div class="git-visualization">
                <div class="areas-container">
                    <div class="area-box working" onclick="highlightArea('working')">
                        <div class="area-icon">üìÅ</div>
                        <div class="area-name">Working Directory</div>
                        <div class="area-description">Your local files where you edit code. Changes here are untracked until staged.</div>
                        <div class="file-list" id="working-files">
                            <div class="file-item modified"><span class="status"></span>index.html</div>
                            <div class="file-item new"><span class="status"></span>styles.css</div>
                        </div>
                    </div>
                    <div class="area-box staging" onclick="highlightArea('staging')">
                        <div class="area-icon">üìã</div>
                        <div class="area-name">Staging Area</div>
                        <div class="area-description">The "index" - a snapshot of files ready for the next commit.</div>
                        <div class="file-list" id="staging-files"></div>
                    </div>
                    <div class="area-box local" onclick="highlightArea('local')">
                        <div class="area-icon">üíæ</div>
                        <div class="area-name">Local Repository</div>
                        <div class="area-description">Your project's complete history stored in the .git folder.</div>
                        <div class="file-list" id="local-files">
                            <div class="file-item"><span class="status" style="background: var(--accent-green)"></span>HEAD ‚Üí main</div>
                        </div>
                    </div>
                    <div class="area-box remote" onclick="highlightArea('remote')">
                        <div class="area-icon">‚òÅÔ∏è</div>
                        <div class="area-name">Remote Repository</div>
                        <div class="area-description">GitHub/GitLab server - shared with your team.</div>
                        <div class="file-list" id="remote-files">
                            <div class="file-item"><span class="status" style="background: var(--accent-magenta)"></span>origin/main</div>
                        </div>
                    </div>
                </div>
                
                <div class="flow-commands">
                    <div class="add-file-control">
                        <input type="text" id="new-file-input" placeholder="newfile.js" class="file-input">
                        <button onclick="addNewFile()" class="add-file-btn">+ Add File</button>
                    </div>
                    <div class="flow-arrow" onclick="executeFlow('add', event)" data-tooltip="Stage changes from Working Directory to Staging Area">
                        <span class="cmd">git add</span>
                        <span class="direction">Working ‚Üí Staging</span>
                    </div>
                    <div class="flow-arrow" onclick="executeFlow('commit', event)" data-tooltip="Save staged changes to Local Repository">
                        <span class="cmd">git commit</span>
                        <span class="direction">Staging ‚Üí Local</span>
                    </div>
                    <div class="flow-arrow" onclick="executeFlow('push', event)" data-tooltip="Upload commits to Remote Repository">
                        <span class="cmd">git push</span>
                        <span class="direction">Local ‚Üí Remote</span>
                    </div>
                    <div class="flow-arrow" onclick="executeFlow('pull', event)" data-tooltip="Download and merge changes from Remote">
                        <span class="cmd">git pull</span>
                        <span class="direction">Remote ‚Üí Local</span>
                    </div>
                    <div class="flow-arrow" onclick="executeFlow('fetch', event)" data-tooltip="Download changes without merging">
                        <span class="cmd">git fetch</span>
                        <span class="direction">Remote ‚Üí Local (refs)</span>
                    </div>
                    <div class="flow-arrow" onclick="executeFlow('checkout', event)" data-tooltip="Restore files from repository to working directory">
                        <span class="cmd">git checkout</span>
                        <span class="direction">Local ‚Üí Working</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Command Overview -->
        <section class="command-overview-section fade-in">
            <h2 class="section-title">Command Overview</h2>
            <div class="command-overview">
                <div class="overview-category">
                    <div class="overview-header setup">
                        <span class="overview-icon">üöÄ</span>
                        <span>Setup</span>
                    </div>
                    <div class="overview-commands">
                        <div class="overview-cmd"><code>git init</code><span>Initialize new repo</span></div>
                        <div class="overview-cmd"><code>git clone &lt;url&gt;</code><span>Copy remote repo</span></div>
                        <div class="overview-cmd"><code>git config</code><span>Set user info</span></div>
                    </div>
                </div>
                <div class="overview-category">
                    <div class="overview-header basic">
                        <span class="overview-icon">üìù</span>
                        <span>Basic</span>
                    </div>
                    <div class="overview-commands">
                        <div class="overview-cmd"><code>git status</code><span>Check state</span></div>
                        <div class="overview-cmd"><code>git add &lt;file&gt;</code><span>Stage changes</span></div>
                        <div class="overview-cmd"><code>git commit -m ""</code><span>Save snapshot</span></div>
                        <div class="overview-cmd"><code>git log</code><span>View history</span></div>
                        <div class="overview-cmd"><code>git diff</code><span>See changes</span></div>
                    </div>
                </div>
                <div class="overview-category">
                    <div class="overview-header branching">
                        <span class="overview-icon">üåø</span>
                        <span>Branching</span>
                    </div>
                    <div class="overview-commands">
                        <div class="overview-cmd"><code>git branch</code><span>List branches</span></div>
                        <div class="overview-cmd"><code>git branch &lt;name&gt;</code><span>Create branch</span></div>
                        <div class="overview-cmd"><code>git checkout &lt;branch&gt;</code><span>Switch branch</span></div>
                        <div class="overview-cmd"><code>git merge &lt;branch&gt;</code><span>Merge branches</span></div>
                        <div class="overview-cmd"><code>git rebase &lt;branch&gt;</code><span>Rebase commits</span></div>
                    </div>
                </div>
                <div class="overview-category">
                    <div class="overview-header remote">
                        <span class="overview-icon">‚òÅÔ∏è</span>
                        <span>Remote</span>
                    </div>
                    <div class="overview-commands">
                        <div class="overview-cmd"><code>git remote -v</code><span>List remotes</span></div>
                        <div class="overview-cmd"><code>git fetch</code><span>Download changes</span></div>
                        <div class="overview-cmd"><code>git pull</code><span>Fetch + merge</span></div>
                        <div class="overview-cmd"><code>git push</code><span>Upload commits</span></div>
                    </div>
                </div>
                <div class="overview-category">
                    <div class="overview-header undo">
                        <span class="overview-icon">‚Ü©Ô∏è</span>
                        <span>Undo</span>
                    </div>
                    <div class="overview-commands">
                        <div class="overview-cmd"><code>git restore &lt;file&gt;</code><span>Discard changes</span></div>
                        <div class="overview-cmd"><code>git reset HEAD~1</code><span>Undo commit</span></div>
                        <div class="overview-cmd"><code>git revert &lt;hash&gt;</code><span>Reverse commit</span></div>
                        <div class="overview-cmd"><code>git stash</code><span>Save temporarily</span></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Branch Visualization -->
        <section class="branch-viz-section fade-in">
            <h2 class="section-title">Branch Visualization</h2>
            <div class="branch-viz-container">
                <div class="branch-controls-row">
                    <div class="control-group">
                        <label>Current Branch:</label>
                        <select id="current-branch-select" onchange="branchViz.switchBranch(this.value)">
                            <option value="main">main</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>New Branch:</label>
                        <select id="new-branch-type">
                            <option value="feature">feature/</option>
                            <option value="develop">develop</option>
                            <option value="hotfix">hotfix/</option>
                            <option value="release">release/</option>
                        </select>
                        <input type="text" id="new-branch-name" placeholder="branch-name" class="branch-name-input">
                        <button class="branch-btn primary" onclick="branchViz.createBranch()">Create Branch</button>
                    </div>
                </div>
                
                <div class="branch-actions">
                    <button class="branch-btn" onclick="branchViz.doAdd()">git add</button>
                    <button class="branch-btn" onclick="branchViz.doCommit()">git commit</button>
                    <button class="branch-btn" onclick="branchViz.doPush()">git push</button>
                    <button class="branch-btn" onclick="branchViz.doPull()">git pull</button>
                    <button class="branch-btn" onclick="branchViz.doMerge()">git merge</button>
                    <button class="branch-btn" onclick="branchViz.reset()">Reset All</button>
                </div>

                <div class="viz-layout">
                    <div class="branch-canvas-container">
                        <canvas id="branch-canvas" width="900" height="350"></canvas>
                    </div>
                    <div class="command-log">
                        <div class="command-log-header">Generated Commands</div>
                        <div class="command-log-body" id="command-log"></div>
                    </div>
                </div>

                <div class="branch-legend">
                    <div class="legend-item"><span class="legend-dot main"></span>main</div>
                    <div class="legend-item"><span class="legend-dot develop"></span>develop</div>
                    <div class="legend-item"><span class="legend-dot feature"></span>feature/*</div>
                    <div class="legend-item"><span class="legend-dot hotfix"></span>hotfix/*</div>
                    <div class="legend-item"><span class="legend-dot release"></span>release/*</div>
                    <div class="legend-item"><span class="legend-dot head"></span>HEAD</div>
                </div>
                
                <div class="branch-state" id="branch-state">
                    <div class="state-item"><span class="state-label">HEAD:</span> <span id="head-display">main</span></div>
                    <div class="state-item"><span class="state-label">Staged:</span> <span id="staged-display">0 files</span></div>
                    <div class="state-item"><span class="state-label">Unpushed:</span> <span id="unpushed-display">0 commits</span></div>
                </div>
            </div>
        </section>

        <!-- Interactive Terminal -->
        <section class="terminal-section fade-in stagger-2">
            <h2 class="section-title">Try Git Commands</h2>
            <div class="terminal">
                <div class="terminal-header">
                    <div class="terminal-dot red"></div>
                    <div class="terminal-dot yellow"></div>
                    <div class="terminal-dot green"></div>
                    <div class="terminal-title">git-terminal ‚Äî bash</div>
                </div>
                <div class="terminal-body" id="terminal-output">
                    <div class="terminal-line">
                        <span class="output">Welcome to the Git Interactive Terminal!</span>
                    </div>
                    <div class="terminal-line">
                        <span class="output">Try commands like: git init, git status, git add, git commit, git push, git pull, git branch, git log</span>
                    </div>
                    <div class="terminal-line">
                        <span class="output">Type 'help' for a list of available commands, or 'reset' to start over.</span>
                    </div>
                </div>
                <div class="terminal-input-line" style="padding: 0 25px 25px;">
                    <span class="prompt">~/project $</span>
                    <input type="text" id="terminal-input" placeholder="Enter a git command..." autocomplete="off">
                </div>
            </div>
        </section>

        <!-- Workflow Demo -->
        <section class="workflow-section fade-in stagger-3">
            <h2 class="section-title">Typical Workflow Demo</h2>
            <div class="workflow-demo">
                <div class="workflow-controls">
                    <button class="workflow-btn primary" onclick="runWorkflowDemo()">‚ñ∂ Run Full Workflow</button>
                    <button class="workflow-btn" onclick="resetDemo()">‚Ü∫ Reset</button>
                </div>
                <div class="workflow-status" id="workflow-status">
                    <div class="status-line">
                        <div class="status-dot"></div>
                        <span>Ready to demonstrate Git workflow...</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Commands Reference -->
        <section class="commands-section fade-in stagger-4">
            <h2 class="section-title">Essential Commands</h2>
            <div class="commands-grid">
                <div class="command-card" onclick="toggleCommand(this)">
                    <div class="command-header">
                        <div class="command-icon">üöÄ</div>
                        <div class="command-name">git init</div>
                    </div>
                    <div class="command-desc">Initialize a new Git repository in your project folder.</div>
                    <div class="command-syntax">git init [directory]</div>
                    <div class="command-examples">
                        <div class="example-item">
                            <div class="code">git init</div>
                            <div class="desc">Initialize repo in current directory</div>
                        </div>
                        <div class="example-item">
                            <div class="code">git init my-project</div>
                            <div class="desc">Create new directory and initialize repo</div>
                        </div>
                    </div>
                </div>

                <div class="command-card" onclick="toggleCommand(this)">
                    <div class="command-header">
                        <div class="command-icon">üì•</div>
                        <div class="command-name">git clone</div>
                    </div>
                    <div class="command-desc">Create a local copy of a remote repository.</div>
                    <div class="command-syntax">git clone &lt;url&gt; [directory]</div>
                    <div class="command-examples">
                        <div class="example-item">
                            <div class="code">git clone https://github.com/user/repo.git</div>
                            <div class="desc">Clone to directory named 'repo'</div>
                        </div>
                        <div class="example-item">
                            <div class="code">git clone git@github.com:user/repo.git my-folder</div>
                            <div class="desc">Clone using SSH to custom directory</div>
                        </div>
                    </div>
                </div>

                <div class="command-card" onclick="toggleCommand(this)">
                    <div class="command-header">
                        <div class="command-icon">‚ûï</div>
                        <div class="command-name">git add</div>
                    </div>
                    <div class="command-desc">Stage changes for the next commit.</div>
                    <div class="command-syntax">git add &lt;file&gt; | git add .</div>
                    <div class="command-examples">
                        <div class="example-item">
                            <div class="code">git add index.html</div>
                            <div class="desc">Stage a specific file</div>
                        </div>
                        <div class="example-item">
                            <div class="code">git add .</div>
                            <div class="desc">Stage all changes in current directory</div>
                        </div>
                        <div class="example-item">
                            <div class="code">git add -p</div>
                            <div class="desc">Interactively stage chunks of changes</div>
                        </div>
                    </div>
                </div>

                <div class="command-card" onclick="toggleCommand(this)">
                    <div class="command-header">
                        <div class="command-icon">üíæ</div>
                        <div class="command-name">git commit</div>
                    </div>
                    <div class="command-desc">Save staged changes to local repository with a message.</div>
                    <div class="command-syntax">git commit -m "message"</div>
                    <div class="command-examples">
                        <div class="example-item">
                            <div class="code">git commit -m "Add login feature"</div>
                            <div class="desc">Commit with inline message</div>
                        </div>
                        <div class="example-item">
                            <div class="code">git commit -am "Fix bug"</div>
                            <div class="desc">Stage all tracked files and commit</div>
                        </div>
                        <div class="example-item">
                            <div class="code">git commit --amend</div>
                            <div class="desc">Modify the last commit</div>
                        </div>
                    </div>
                </div>

                <div class="command-card" onclick="toggleCommand(this)">
                    <div class="command-header">
                        <div class="command-icon">üìä</div>
                        <div class="command-name">git status</div>
                    </div>
                    <div class="command-desc">Show the state of your working directory and staging area.</div>
                    <div class="command-syntax">git status [-s]</div>
                    <div class="command-examples">
                        <div class="example-item">
                            <div class="code">git status</div>
                            <div class="desc">Full status output</div>
                        </div>
                        <div class="example-item">
                            <div class="code">git status -s</div>
                            <div class="desc">Short/compact status format</div>
                        </div>
                    </div>
                </div>

                <div class="command-card" onclick="toggleCommand(this)">
                    <div class="command-header">
                        <div class="command-icon">üìú</div>
                        <div class="command-name">git log</div>
                    </div>
                    <div class="command-desc">View commit history of the repository.</div>
                    <div class="command-syntax">git log [--oneline] [--graph]</div>
                    <div class="command-examples">
                        <div class="example-item">
                            <div class="code">git log --oneline</div>
                            <div class="desc">Compact one-line format</div>
                        </div>
                        <div class="example-item">
                            <div class="code">git log --graph --all</div>
                            <div class="desc">Visual branch graph</div>
                        </div>
                        <div class="example-item">
                            <div class="code">git log -n 5</div>
                            <div class="desc">Show last 5 commits</div>
                        </div>
                    </div>
                </div>

                <div class="command-card" onclick="toggleCommand(this)">
                    <div class="command-header">
                        <div class="command-icon">üåø</div>
                        <div class="command-name">git branch</div>
                    </div>
                    <div class="command-desc">List, create, or delete branches.</div>
                    <div class="command-syntax">git branch [name] | git branch -d &lt;name&gt;</div>
                    <div class="command-examples">
                        <div class="example-item">
                            <div class="code">git branch</div>
                            <div class="desc">List local branches</div>
                        </div>
                        <div class="example-item">
                            <div class="code">git branch feature-login</div>
                            <div class="desc">Create new branch</div>
                        </div>
                        <div class="example-item">
                            <div class="code">git branch -d old-feature</div>
                            <div class="desc">Delete a branch</div>
                        </div>
                    </div>
                </div>

                <div class="command-card" onclick="toggleCommand(this)">
                    <div class="command-header">
                        <div class="command-icon">üîÄ</div>
                        <div class="command-name">git checkout / switch</div>
                    </div>
                    <div class="command-desc">Switch branches or restore files.</div>
                    <div class="command-syntax">git checkout &lt;branch&gt; | git switch &lt;branch&gt;</div>
                    <div class="command-examples">
                        <div class="example-item">
                            <div class="code">git checkout main</div>
                            <div class="desc">Switch to main branch</div>
                        </div>
                        <div class="example-item">
                            <div class="code">git checkout -b new-feature</div>
                            <div class="desc">Create and switch to new branch</div>
                        </div>
                        <div class="example-item">
                            <div class="code">git switch -c new-feature</div>
                            <div class="desc">Modern way to create & switch</div>
                        </div>
                    </div>
                </div>

                <div class="command-card" onclick="toggleCommand(this)">
                    <div class="command-header">
                        <div class="command-icon">üîó</div>
                        <div class="command-name">git merge</div>
                    </div>
                    <div class="command-desc">Combine branches together.</div>
                    <div class="command-syntax">git merge &lt;branch&gt;</div>
                    <div class="command-examples">
                        <div class="example-item">
                            <div class="code">git merge feature-login</div>
                            <div class="desc">Merge feature branch into current</div>
                        </div>
                        <div class="example-item">
                            <div class="code">git merge --no-ff feature</div>
                            <div class="desc">Create merge commit even if fast-forward possible</div>
                        </div>
                    </div>
                </div>

                <div class="command-card" onclick="toggleCommand(this)">
                    <div class="command-header">
                        <div class="command-icon">‚¨ÜÔ∏è</div>
                        <div class="command-name">git push</div>
                    </div>
                    <div class="command-desc">Upload local commits to remote repository.</div>
                    <div class="command-syntax">git push [remote] [branch]</div>
                    <div class="command-examples">
                        <div class="example-item">
                            <div class="code">git push origin main</div>
                            <div class="desc">Push main branch to origin</div>
                        </div>
                        <div class="example-item">
                            <div class="code">git push -u origin feature</div>
                            <div class="desc">Push and set upstream tracking</div>
                        </div>
                        <div class="example-item">
                            <div class="code">git push --force</div>
                            <div class="desc">Force push (use carefully!)</div>
                        </div>
                    </div>
                </div>

                <div class="command-card" onclick="toggleCommand(this)">
                    <div class="command-header">
                        <div class="command-icon">‚¨áÔ∏è</div>
                        <div class="command-name">git pull</div>
                    </div>
                    <div class="command-desc">Download and integrate remote changes (fetch + merge).</div>
                    <div class="command-syntax">git pull [remote] [branch]</div>
                    <div class="command-examples">
                        <div class="example-item">
                            <div class="code">git pull origin main</div>
                            <div class="desc">Pull main branch from origin</div>
                        </div>
                        <div class="example-item">
                            <div class="code">git pull --rebase</div>
                            <div class="desc">Rebase instead of merge</div>
                        </div>
                    </div>
                </div>

                <div class="command-card" onclick="toggleCommand(this)">
                    <div class="command-header">
                        <div class="command-icon">üîç</div>
                        <div class="command-name">git diff</div>
                    </div>
                    <div class="command-desc">Show changes between commits, branches, or files.</div>
                    <div class="command-syntax">git diff [file] | git diff --staged</div>
                    <div class="command-examples">
                        <div class="example-item">
                            <div class="code">git diff</div>
                            <div class="desc">Show unstaged changes</div>
                        </div>
                        <div class="example-item">
                            <div class="code">git diff --staged</div>
                            <div class="desc">Show staged changes</div>
                        </div>
                        <div class="example-item">
                            <div class="code">git diff main..feature</div>
                            <div class="desc">Compare two branches</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Cheat Sheet -->
        <section class="cheatsheet-section">
            <h2 class="section-title">Quick Reference Cheat Sheet</h2>
            <div class="cheatsheet">
                <div class="cheatsheet-category">
                    <div class="category-title setup"><span class="dot"></span>Setup & Configuration</div>
                    <div class="cheat-items">
                        <div class="cheat-item" onclick="copyToTerminal('git config --global user.name \"Your Name\"')">
                            <span class="cmd">git config --global user.name "Name"</span>
                            <span class="desc">Set your username</span>
                        </div>
                        <div class="cheat-item" onclick="copyToTerminal('git config --global user.email \"you@email.com\"')">
                            <span class="cmd">git config --global user.email "email"</span>
                            <span class="desc">Set your email</span>
                        </div>
                        <div class="cheat-item" onclick="copyToTerminal('git config --list')">
                            <span class="cmd">git config --list</span>
                            <span class="desc">View all settings</span>
                        </div>
                    </div>
                </div>

                <div class="cheatsheet-category">
                    <div class="category-title basic"><span class="dot"></span>Basic Workflow</div>
                    <div class="cheat-items">
                        <div class="cheat-item" onclick="copyToTerminal('git status')">
                            <span class="cmd">git status</span>
                            <span class="desc">Check current state</span>
                        </div>
                        <div class="cheat-item" onclick="copyToTerminal('git add .')">
                            <span class="cmd">git add .</span>
                            <span class="desc">Stage all changes</span>
                        </div>
                        <div class="cheat-item" onclick="copyToTerminal('git commit -m \"message\"')">
                            <span class="cmd">git commit -m "message"</span>
                            <span class="desc">Commit with message</span>
                        </div>
                        <div class="cheat-item" onclick="copyToTerminal('git log --oneline')">
                            <span class="cmd">git log --oneline</span>
                            <span class="desc">View commit history</span>
                        </div>
                    </div>
                </div>

                <div class="cheatsheet-category">
                    <div class="category-title branching"><span class="dot"></span>Branching</div>
                    <div class="cheat-items">
                        <div class="cheat-item" onclick="copyToTerminal('git branch')">
                            <span class="cmd">git branch</span>
                            <span class="desc">List branches</span>
                        </div>
                        <div class="cheat-item" onclick="copyToTerminal('git checkout -b feature')">
                            <span class="cmd">git checkout -b feature</span>
                            <span class="desc">Create & switch branch</span>
                        </div>
                        <div class="cheat-item" onclick="copyToTerminal('git merge feature')">
                            <span class="cmd">git merge feature</span>
                            <span class="desc">Merge branch</span>
                        </div>
                        <div class="cheat-item" onclick="copyToTerminal('git branch -d feature')">
                            <span class="cmd">git branch -d feature</span>
                            <span class="desc">Delete branch</span>
                        </div>
                    </div>
                </div>

                <div class="cheatsheet-category">
                    <div class="category-title remote"><span class="dot"></span>Remote Operations</div>
                    <div class="cheat-items">
                        <div class="cheat-item" onclick="copyToTerminal('git remote -v')">
                            <span class="cmd">git remote -v</span>
                            <span class="desc">View remote URLs</span>
                        </div>
                        <div class="cheat-item" onclick="copyToTerminal('git fetch origin')">
                            <span class="cmd">git fetch origin</span>
                            <span class="desc">Download remote changes</span>
                        </div>
                        <div class="cheat-item" onclick="copyToTerminal('git pull origin main')">
                            <span class="cmd">git pull origin main</span>
                            <span class="desc">Pull remote changes</span>
                        </div>
                        <div class="cheat-item" onclick="copyToTerminal('git push origin main')">
                            <span class="cmd">git push origin main</span>
                            <span class="desc">Push to remote</span>
                        </div>
                    </div>
                </div>

                <div class="cheatsheet-category">
                    <div class="category-title advanced"><span class="dot"></span>Undo & Fix</div>
                    <div class="cheat-items">
                        <div class="cheat-item" onclick="copyToTerminal('git restore file.txt')">
                            <span class="cmd">git restore file.txt</span>
                            <span class="desc">Discard file changes</span>
                        </div>
                        <div class="cheat-item" onclick="copyToTerminal('git reset HEAD~1')">
                            <span class="cmd">git reset HEAD~1</span>
                            <span class="desc">Undo last commit (keep changes)</span>
                        </div>
                        <div class="cheat-item" onclick="copyToTerminal('git stash')">
                            <span class="cmd">git stash</span>
                            <span class="desc">Save changes temporarily</span>
                        </div>
                        <div class="cheat-item" onclick="copyToTerminal('git revert HEAD')">
                            <span class="cmd">git revert HEAD</span>
                            <span class="desc">Revert last commit (new commit)</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>Interactive Git Workflow Guide ‚Äî Learn by doing!</p>
    </footer>

    <div class="tooltip" id="tooltip"></div>

    <script>
        // Git simulation state
        const gitState = {
            initialized: false,
            workingDir: [
                { name: 'index.html', status: 'new' },
                { name: 'styles.css', status: 'new' }
            ],
            stagingArea: [],
            localRepo: [],
            remoteRepo: [],
            currentBranch: 'main',
            branches: ['main'],
            commits: [],
            remoteUrl: null
        };

        // Terminal functionality
        const terminalInput = document.getElementById('terminal-input');
        const terminalOutput = document.getElementById('terminal-output');

        terminalInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                const command = this.value.trim();
                if (command) {
                    executeCommand(command);
                    this.value = '';
                }
            }
        });

        function executeCommand(cmd) {
            addTerminalLine(cmd, 'command');
            const response = processGitCommand(cmd);
            if (response) {
                response.forEach(line => {
                    addTerminalLine(line.text, line.type);
                });
            }
            terminalOutput.scrollTop = terminalOutput.scrollHeight;
        }

        function addTerminalLine(text, type) {
            const line = document.createElement('div');
            line.className = 'terminal-line';
            
            if (type === 'command') {
                line.innerHTML = `<span class="prompt">~/project $</span> <span class="command">${escapeHtml(text)}</span>`;
            } else {
                line.innerHTML = `<span class="${type}">${escapeHtml(text)}</span>`;
            }
            
            terminalOutput.appendChild(line);
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function processGitCommand(cmd) {
            const parts = cmd.toLowerCase().split(' ');
            const mainCmd = parts[0];
            const subCmd = parts[1];
            const args = parts.slice(2);

            if (mainCmd === 'help') {
                return [
                    { text: 'Available commands:', type: 'output' },
                    { text: '  git init          - Initialize a repository', type: 'output' },
                    { text: '  git status        - Show working tree status', type: 'output' },
                    { text: '  git add <file>    - Stage files (use . for all)', type: 'output' },
                    { text: '  git commit -m     - Commit staged changes', type: 'output' },
                    { text: '  git log           - Show commit history', type: 'output' },
                    { text: '  git branch        - List/create branches', type: 'output' },
                    { text: '  git checkout      - Switch branches', type: 'output' },
                    { text: '  git push          - Push to remote', type: 'output' },
                    { text: '  git pull          - Pull from remote', type: 'output' },
                    { text: '  git clone <url>   - Clone a repository', type: 'output' },
                    { text: '  git remote -v     - Show remotes', type: 'output' },
                    { text: '  git diff          - Show differences', type: 'output' },
                    { text: '  reset             - Reset simulation', type: 'output' },
                    { text: '  clear             - Clear terminal', type: 'output' },
                ];
            }

            if (mainCmd === 'clear') {
                terminalOutput.innerHTML = '';
                return null;
            }

            if (mainCmd === 'reset') {
                resetGitState();
                updateVisualization();
                return [{ text: 'Simulation reset to initial state.', type: 'success' }];
            }

            if (mainCmd !== 'git') {
                return [{ text: `Command not found: ${mainCmd}. Try 'help' for available commands.`, type: 'error' }];
            }

            switch (subCmd) {
                case 'init':
                    if (gitState.initialized) {
                        return [{ text: 'Reinitialized existing Git repository in ~/project/.git/', type: 'output' }];
                    }
                    gitState.initialized = true;
                    gitState.remoteUrl = null;
                    return [
                        { text: 'Initialized empty Git repository in ~/project/.git/', type: 'success' },
                        { text: 'Hint: Use "git add" to track files', type: 'output' }
                    ];

                case 'clone':
                    const url = parts[2] || 'https://github.com/user/repo.git';
                    gitState.initialized = true;
                    gitState.remoteUrl = 'origin';
                    gitState.remoteRepo = ['README.md'];
                    gitState.localRepo = ['README.md'];
                    gitState.workingDir = [];
                    gitState.commits = [{ hash: 'abc1234', message: 'Initial commit', files: ['README.md'] }];
                    updateVisualization();
                    return [
                        { text: `Cloning into 'repo'...`, type: 'output' },
                        { text: 'remote: Enumerating objects: 3, done.', type: 'output' },
                        { text: 'remote: Total 3 (delta 0), reused 0 (delta 0)', type: 'output' },
                        { text: 'Receiving objects: 100% (3/3), done.', type: 'success' }
                    ];

                case 'status':
                    if (!gitState.initialized) {
                        return [{ text: 'fatal: not a git repository', type: 'error' }];
                    }
                    const statusLines = [
                        { text: `On branch ${gitState.currentBranch}`, type: 'output' }
                    ];
                    
                    if (gitState.stagingArea.length > 0) {
                        statusLines.push({ text: 'Changes to be committed:', type: 'success' });
                        gitState.stagingArea.forEach(f => {
                            statusLines.push({ text: `        ${f.status === 'modified' ? 'modified' : 'new file'}:   ${f.name}`, type: 'success' });
                        });
                    }
                    
                    if (gitState.workingDir.length > 0) {
                        const newFiles = gitState.workingDir.filter(f => f.status === 'new');
                        const modifiedFiles = gitState.workingDir.filter(f => f.status === 'modified');
                        
                        if (modifiedFiles.length > 0) {
                            statusLines.push({ text: 'Changes not staged for commit:', type: 'error' });
                            modifiedFiles.forEach(f => {
                                statusLines.push({ text: `        modified:   ${f.name}`, type: 'error' });
                            });
                        }
                        
                        if (newFiles.length > 0) {
                            statusLines.push({ text: 'Untracked files:', type: 'error' });
                            newFiles.forEach(f => {
                                statusLines.push({ text: `        ${f.name}`, type: 'error' });
                            });
                        }
                    }
                    
                    if (gitState.stagingArea.length === 0 && gitState.workingDir.length === 0) {
                        statusLines.push({ text: 'nothing to commit, working tree clean', type: 'output' });
                    }
                    
                    return statusLines;

                case 'add':
                    if (!gitState.initialized) {
                        return [{ text: 'fatal: not a git repository', type: 'error' }];
                    }
                    const fileToAdd = parts[2];
                    if (fileToAdd === '.' || fileToAdd === '-A' || fileToAdd === '--all') {
                        gitState.stagingArea = [...gitState.stagingArea, ...gitState.workingDir];
                        gitState.workingDir = [];
                        updateVisualization();
                        return [{ text: 'All files staged for commit.', type: 'success' }];
                    } else if (fileToAdd) {
                        const fileIndex = gitState.workingDir.findIndex(f => f.name === fileToAdd);
                        if (fileIndex !== -1) {
                            gitState.stagingArea.push(gitState.workingDir[fileIndex]);
                            gitState.workingDir.splice(fileIndex, 1);
                            updateVisualization();
                            return [{ text: `Added '${fileToAdd}' to staging area.`, type: 'success' }];
                        }
                        return [{ text: `fatal: pathspec '${fileToAdd}' did not match any files`, type: 'error' }];
                    }
                    return [{ text: 'Nothing specified, nothing added.', type: 'output' }];

                case 'commit':
                    if (!gitState.initialized) {
                        return [{ text: 'fatal: not a git repository', type: 'error' }];
                    }
                    if (gitState.stagingArea.length === 0) {
                        return [{ text: 'nothing to commit, working tree clean', type: 'output' }];
                    }
                    const msgIndex = cmd.indexOf('-m');
                    let message = 'No message';
                    if (msgIndex !== -1) {
                        const msgMatch = cmd.match(/-m\s*["']?([^"']+)["']?/);
                        if (msgMatch) message = msgMatch[1];
                    }
                    const hash = Math.random().toString(16).substr(2, 7);
                    const committedFiles = gitState.stagingArea.map(f => f.name);
                    gitState.commits.push({ hash, message, files: committedFiles });
                    
                    // Add files to local repo (avoid duplicates)
                    committedFiles.forEach(filename => {
                        if (!gitState.localRepo.includes(filename)) {
                            gitState.localRepo.push(filename);
                        }
                    });
                    
                    const fileCount = gitState.stagingArea.length;
                    gitState.stagingArea = [];
                    updateVisualization();
                    return [
                        { text: `[${gitState.currentBranch} ${hash}] ${message}`, type: 'success' },
                        { text: ` ${fileCount} file(s) changed`, type: 'output' }
                    ];

                case 'log':
                    if (!gitState.initialized) {
                        return [{ text: 'fatal: not a git repository', type: 'error' }];
                    }
                    if (gitState.commits.length === 0) {
                        return [{ text: 'fatal: your current branch does not have any commits yet', type: 'error' }];
                    }
                    const logLines = [];
                    gitState.commits.slice().reverse().forEach(c => {
                        logLines.push({ text: `commit ${c.hash} (HEAD -> ${gitState.currentBranch})`, type: 'output' });
                        logLines.push({ text: `    ${c.message}`, type: 'output' });
                        logLines.push({ text: '', type: 'output' });
                    });
                    return logLines;

                case 'branch':
                    if (!gitState.initialized) {
                        return [{ text: 'fatal: not a git repository', type: 'error' }];
                    }
                    const branchName = parts[2];
                    if (parts[2] === '-d' && parts[3]) {
                        if (parts[3] === gitState.currentBranch) {
                            return [{ text: `error: Cannot delete branch '${parts[3]}' checked out`, type: 'error' }];
                        }
                        gitState.branches = gitState.branches.filter(b => b !== parts[3]);
                        return [{ text: `Deleted branch ${parts[3]}`, type: 'success' }];
                    }
                    if (branchName && !branchName.startsWith('-')) {
                        if (gitState.branches.includes(branchName)) {
                            return [{ text: `fatal: A branch named '${branchName}' already exists.`, type: 'error' }];
                        }
                        gitState.branches.push(branchName);
                        return [{ text: `Created branch '${branchName}'`, type: 'success' }];
                    }
                    return gitState.branches.map(b => ({
                        text: (b === gitState.currentBranch ? '* ' : '  ') + b,
                        type: b === gitState.currentBranch ? 'success' : 'output'
                    }));

                case 'checkout':
                    if (!gitState.initialized) {
                        return [{ text: 'fatal: not a git repository', type: 'error' }];
                    }
                    if (parts[2] === '-b' && parts[3]) {
                        if (gitState.branches.includes(parts[3])) {
                            return [{ text: `fatal: A branch named '${parts[3]}' already exists.`, type: 'error' }];
                        }
                        gitState.branches.push(parts[3]);
                        gitState.currentBranch = parts[3];
                        updateVisualization();
                        return [{ text: `Switched to a new branch '${parts[3]}'`, type: 'success' }];
                    }
                    const targetBranch = parts[2];
                    if (targetBranch && gitState.branches.includes(targetBranch)) {
                        gitState.currentBranch = targetBranch;
                        updateVisualization();
                        return [{ text: `Switched to branch '${targetBranch}'`, type: 'success' }];
                    }
                    return [{ text: `error: pathspec '${targetBranch}' did not match any known branch`, type: 'error' }];

                case 'push':
                    if (!gitState.initialized) {
                        return [{ text: 'fatal: not a git repository', type: 'error' }];
                    }
                    if (!gitState.remoteUrl) {
                        gitState.remoteUrl = 'origin';
                    }
                    if (gitState.localRepo.length === 0) {
                        return [{ text: 'Everything up-to-date', type: 'output' }];
                    }
                    gitState.remoteRepo = [...gitState.localRepo];
                    updateVisualization();
                    return [
                        { text: 'Enumerating objects: done.', type: 'output' },
                        { text: 'Writing objects: 100%, done.', type: 'output' },
                        { text: `To github.com:user/repo.git`, type: 'output' },
                        { text: `   ${gitState.currentBranch} -> ${gitState.currentBranch}`, type: 'success' }
                    ];

                case 'pull':
                    if (!gitState.initialized) {
                        return [{ text: 'fatal: not a git repository', type: 'error' }];
                    }
                    return [
                        { text: 'Already up to date.', type: 'success' }
                    ];

                case 'fetch':
                    if (!gitState.initialized) {
                        return [{ text: 'fatal: not a git repository', type: 'error' }];
                    }
                    return [
                        { text: 'remote: Counting objects: done.', type: 'output' },
                        { text: 'From github.com:user/repo', type: 'output' },
                        { text: ' * branch            main       -> FETCH_HEAD', type: 'success' }
                    ];

                case 'remote':
                    if (!gitState.initialized) {
                        return [{ text: 'fatal: not a git repository', type: 'error' }];
                    }
                    if (parts[2] === '-v') {
                        if (gitState.remoteUrl) {
                            return [
                                { text: 'origin  https://github.com/user/repo.git (fetch)', type: 'output' },
                                { text: 'origin  https://github.com/user/repo.git (push)', type: 'output' }
                            ];
                        }
                        return [{ text: 'No remotes configured.', type: 'output' }];
                    }
                    if (parts[2] === 'add' && parts[3] && parts[4]) {
                        gitState.remoteUrl = parts[3];
                        return [{ text: `Added remote '${parts[3]}'`, type: 'success' }];
                    }
                    return [{ text: gitState.remoteUrl || 'No remotes configured.', type: 'output' }];

                case 'diff':
                    if (!gitState.initialized) {
                        return [{ text: 'fatal: not a git repository', type: 'error' }];
                    }
                    if (gitState.workingDir.length === 0 && gitState.stagingArea.length === 0) {
                        return [{ text: 'No changes to show.', type: 'output' }];
                    }
                    return [
                        { text: 'diff --git a/index.html b/index.html', type: 'output' },
                        { text: '--- a/index.html', type: 'error' },
                        { text: '+++ b/index.html', type: 'success' },
                        { text: '@@ -1,5 +1,10 @@', type: 'output' },
                        { text: '+<html>', type: 'success' },
                        { text: '+  <body>Hello World</body>', type: 'success' },
                        { text: '+</html>', type: 'success' }
                    ];

                default:
                    return [{ text: `git: '${subCmd}' is not a git command. See 'help'.`, type: 'error' }];
            }
        }

        function resetGitState() {
            gitState.initialized = false;
            gitState.workingDir = [
                { name: 'index.html', status: 'new' },
                { name: 'styles.css', status: 'new' }
            ];
            gitState.stagingArea = [];
            gitState.localRepo = [];
            gitState.remoteRepo = [];
            gitState.currentBranch = 'main';
            gitState.branches = ['main'];
            gitState.commits = [];
            gitState.remoteUrl = null;
        }

        // Visualization updates
        function updateVisualization() {
            // Working Directory
            const workingFiles = document.getElementById('working-files');
            workingFiles.innerHTML = '';
            if (gitState.workingDir.length === 0) {
                workingFiles.innerHTML = '<div class="empty-state">No changes</div>';
            } else {
                gitState.workingDir.forEach(file => {
                    const item = document.createElement('div');
                    item.className = `file-item ${file.status}`;
                    item.innerHTML = `<span class="status"></span>${file.name}`;
                    workingFiles.appendChild(item);
                });
            }

            // Staging Area
            const stagingFiles = document.getElementById('staging-files');
            stagingFiles.innerHTML = '';
            if (gitState.stagingArea.length === 0) {
                stagingFiles.innerHTML = '<div class="empty-state">Nothing staged</div>';
            } else {
                gitState.stagingArea.forEach(file => {
                    const item = document.createElement('div');
                    item.className = 'file-item new';
                    item.innerHTML = `<span class="status"></span>${file.name}`;
                    stagingFiles.appendChild(item);
                });
            }

            // Local Repository
            const localFiles = document.getElementById('local-files');
            localFiles.innerHTML = `<div class="file-item branch-indicator"><span class="status" style="background: var(--accent-green)"></span>HEAD ‚Üí ${gitState.currentBranch}</div>`;
            if (gitState.localRepo.length === 0) {
                localFiles.innerHTML += '<div class="empty-state">No files committed</div>';
            } else {
                gitState.localRepo.forEach(filename => {
                    const item = document.createElement('div');
                    item.className = 'file-item';
                    item.innerHTML = `<span class="status" style="background: var(--accent-green)"></span>${filename} <button class="edit-btn" onclick="editFile('${filename}', event)">edit</button>`;
                    localFiles.appendChild(item);
                });
            }

            // Remote Repository
            const remoteFiles = document.getElementById('remote-files');
            remoteFiles.innerHTML = `<div class="file-item branch-indicator"><span class="status" style="background: var(--accent-magenta)"></span>origin/${gitState.currentBranch}</div>`;
            if (gitState.remoteRepo.length === 0) {
                remoteFiles.innerHTML += '<div class="empty-state">No files pushed</div>';
            } else {
                gitState.remoteRepo.forEach(filename => {
                    const item = document.createElement('div');
                    item.className = 'file-item';
                    item.innerHTML = `<span class="status" style="background: var(--accent-magenta)"></span>${filename}`;
                    remoteFiles.appendChild(item);
                });
            }
        }

        // Edit a file (creates a modified copy in working directory)
        function editFile(filename, event) {
            event.stopPropagation();
            
            // Check if already in working dir
            const existsInWorking = gitState.workingDir.some(f => f.name === filename);
            if (existsInWorking) {
                addTerminalLine(`File '${filename}' already has uncommitted changes`, 'error');
                return;
            }
            
            gitState.workingDir.push({ name: filename, status: 'modified' });
            updateVisualization();
            addTerminalLine(`Modified file: ${filename}`, 'success');
            addTerminalLine(`Changes appear in Working Directory`, 'output');
            terminalOutput.scrollTop = terminalOutput.scrollHeight;
        }

        function updateFileList(elementId, files, status) {
            const container = document.getElementById(elementId);
            container.innerHTML = '';
            files.forEach(file => {
                const item = document.createElement('div');
                item.className = `file-item ${status}`;
                const filename = typeof file === 'string' ? file : file.name;
                item.innerHTML = `<span class="status"></span>${filename}`;
                container.appendChild(item);
            });
        }

        // Add new file to working directory
        function addNewFile() {
            const input = document.getElementById('new-file-input');
            const filename = input.value.trim();
            
            if (!filename) {
                addTerminalLine('Please enter a filename', 'error');
                return;
            }
            
            // Check if file already exists anywhere
            const existsInWorking = gitState.workingDir.some(f => f.name === filename);
            const existsInStaging = gitState.stagingArea.some(f => f.name === filename);
            
            if (existsInWorking || existsInStaging) {
                addTerminalLine(`File '${filename}' already has pending changes`, 'error');
                return;
            }
            
            // Add to working directory
            gitState.workingDir.push({ name: filename, status: 'new' });
            updateVisualization();
            
            addTerminalLine(`Created new file: ${filename}`, 'success');
            addTerminalLine(`File appears in Working Directory (untracked)`, 'output');
            
            input.value = '';
            terminalOutput.scrollTop = terminalOutput.scrollHeight;
        }

        // Allow pressing Enter in the file input
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('new-file-input').addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    addNewFile();
                }
            });
        });

        // Flow commands
        function executeFlow(flow, event) {
            const arrows = document.querySelectorAll('.flow-arrow');
            arrows.forEach(a => a.classList.remove('active'));
            if (event && event.target) {
                event.target.closest('.flow-arrow').classList.add('active');
            }

            const commands = {
                'add': 'git add .',
                'commit': 'git commit -m "Update files"',
                'push': 'git push origin main',
                'pull': 'git pull origin main',
                'fetch': 'git fetch origin',
                'checkout': 'git checkout main'
            };

            if (!gitState.initialized && flow !== 'init') {
                executeCommand('git init');
            }
            
            setTimeout(() => {
                executeCommand(commands[flow]);
            }, 100);
        }

        function highlightArea(area) {
            const boxes = document.querySelectorAll('.area-box');
            boxes.forEach(box => box.style.transform = 'scale(1)');
            document.querySelector(`.area-box.${area}`).style.transform = 'scale(1.02)';
        }

        // Command cards
        function toggleCommand(card) {
            const wasExpanded = card.classList.contains('expanded');
            document.querySelectorAll('.command-card').forEach(c => c.classList.remove('expanded'));
            if (!wasExpanded) {
                card.classList.add('expanded');
            }
        }

        // Copy to terminal
        function copyToTerminal(cmd) {
            terminalInput.value = cmd;
            terminalInput.focus();
        }

        // Workflow demo
        async function runWorkflowDemo() {
            const statusEl = document.getElementById('workflow-status');
            const steps = [
                { cmd: 'git init', desc: 'Initializing repository...' },
                { cmd: 'git status', desc: 'Checking status...' },
                { cmd: 'git add .', desc: 'Staging all files...' },
                { cmd: 'git commit -m "Initial commit"', desc: 'Creating first commit...' },
                { cmd: 'git remote add origin https://github.com/user/repo.git', desc: 'Adding remote...' },
                { cmd: 'git push origin main', desc: 'Pushing to GitHub...' },
                { cmd: 'git log --oneline', desc: 'Viewing history...' }
            ];

            resetGitState();
            updateVisualization();

            for (let i = 0; i < steps.length; i++) {
                statusEl.innerHTML = `
                    <div class="status-line">
                        <div class="status-dot"></div>
                        <span>Step ${i + 1}/${steps.length}: ${steps[i].desc}</span>
                    </div>
                    <div style="margin-top: 10px; color: var(--accent-cyan); font-family: 'JetBrains Mono', monospace;">
                        $ ${steps[i].cmd}
                    </div>
                `;
                await new Promise(resolve => setTimeout(resolve, 1500));
                executeCommand(steps[i].cmd);
            }

            statusEl.innerHTML = `
                <div class="status-line">
                    <div class="status-dot" style="background: var(--accent-green);"></div>
                    <span style="color: var(--accent-green);">Workflow complete! Your code is now on GitHub.</span>
                </div>
            `;
        }

        function resetDemo() {
            resetGitState();
            updateVisualization();
            document.getElementById('workflow-status').innerHTML = `
                <div class="status-line">
                    <div class="status-dot"></div>
                    <span>Ready to demonstrate Git workflow...</span>
                </div>
            `;
            terminalOutput.innerHTML = `
                <div class="terminal-line">
                    <span class="output">Terminal reset. Ready for new commands.</span>
                </div>
            `;
        }

        // Tooltips
        const tooltip = document.getElementById('tooltip');
        document.querySelectorAll('[data-tooltip]').forEach(el => {
            el.addEventListener('mouseenter', (e) => {
                tooltip.textContent = e.target.dataset.tooltip;
                tooltip.classList.add('visible');
            });
            el.addEventListener('mousemove', (e) => {
                tooltip.style.left = e.pageX + 15 + 'px';
                tooltip.style.top = e.pageY + 15 + 'px';
            });
            el.addEventListener('mouseleave', () => {
                tooltip.classList.remove('visible');
            });
        });

        // Initialize animations
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.fade-in').forEach((el, i) => {
                el.style.animationDelay = `${i * 0.1}s`;
            });
            
            // Initialize branch visualization
            branchViz.init();
        });

        // Branch Visualization
        const branchViz = {
            canvas: null,
            ctx: null,
            
            // State
            branches: {},
            commits: [],
            currentBranch: 'main',
            stagedFiles: 0,
            commitCounter: 0,
            
            // Visual settings
            colors: {
                main: '#00d4ff',
                develop: '#00ff88',
                feature: '#ffd60a',
                hotfix: '#ff006e',
                release: '#ff9500'
            },
            commitRadius: 18,
            commitSpacing: 70,
            branchSpacing: 50,
            startX: 80,
            startY: 60,

            init() {
                this.canvas = document.getElementById('branch-canvas');
                this.ctx = this.canvas.getContext('2d');
                this.reset();
            },

            reset() {
                this.branches = {
                    main: {
                        name: 'main',
                        type: 'main',
                        color: this.colors.main,
                        commits: [],
                        row: 0,
                        pushedCount: 0,
                        parent: null,
                        branchPoint: null
                    }
                };
                this.commits = [];
                this.currentBranch = 'main';
                this.stagedFiles = 0;
                this.commitCounter = 0;
                
                // Initial commit
                this.addCommitInternal('main', 'Initial commit', true);
                this.branches.main.pushedCount = 1;
                
                this.updateUI();
                this.draw();
                this.logCommand('git init', 'Initialized empty Git repository');
                this.logCommand('git commit -m "Initial commit"', '[main abc1234] Initial commit');
            },

            getBranchColor(type) {
                return this.colors[type] || this.colors.feature;
            },

            createBranch() {
                const typeSelect = document.getElementById('new-branch-type');
                const nameInput = document.getElementById('new-branch-name');
                const type = typeSelect.value;
                let name = nameInput.value.trim();
                
                if (type === 'develop') {
                    name = 'develop';
                } else if (!name) {
                    alert('Please enter a branch name');
                    return;
                } else {
                    name = type + '/' + name;
                }
                
                if (this.branches[name]) {
                    alert('Branch already exists');
                    return;
                }
                
                // Find the next available row
                const usedRows = Object.values(this.branches).map(b => b.row);
                let newRow = 1;
                while (usedRows.includes(newRow)) newRow++;
                
                const parentBranch = this.branches[this.currentBranch];
                const parentCommit = parentBranch.commits[parentBranch.commits.length - 1];
                
                this.branches[name] = {
                    name: name,
                    type: type,
                    color: this.getBranchColor(type),
                    commits: [],
                    row: newRow,
                    pushedCount: 0,
                    parent: this.currentBranch,
                    branchPoint: parentCommit
                };
                
                // Switch to new branch
                this.currentBranch = name;
                
                nameInput.value = '';
                this.updateUI();
                this.draw();
                this.logCommand(`git checkout -b ${name}`, `Switched to a new branch '${name}'`);
            },

            switchBranch(branchName) {
                if (!this.branches[branchName]) return;
                this.currentBranch = branchName;
                this.updateUI();
                this.draw();
                this.logCommand(`git checkout ${branchName}`, `Switched to branch '${branchName}'`);
            },

            doAdd() {
                this.stagedFiles++;
                this.updateUI();
                this.logCommand('git add .', `Staged ${this.stagedFiles} file(s)`);
            },

            doCommit() {
                if (this.stagedFiles === 0) {
                    this.logCommand('git commit', 'nothing to commit, working tree clean');
                    return;
                }
                
                const msg = `Update ${this.stagedFiles} file(s)`;
                this.addCommitInternal(this.currentBranch, msg);
                this.stagedFiles = 0;
                
                this.updateUI();
                this.draw();
            },

            addCommitInternal(branchName, message, isInit = false) {
                const branch = this.branches[branchName];
                if (!branch) return;
                
                this.commitCounter++;
                const hash = Math.random().toString(16).substr(2, 7);
                
                // Calculate x position
                let xPos;
                if (isInit) {
                    xPos = this.startX;
                } else {
                    // Find the rightmost commit across all branches
                    let maxX = this.startX;
                    for (const commit of this.commits) {
                        if (commit.x > maxX) maxX = commit.x;
                    }
                    xPos = maxX + this.commitSpacing;
                }
                
                const commit = {
                    id: this.commitCounter,
                    hash: hash,
                    branch: branchName,
                    message: message,
                    x: xPos,
                    y: this.startY + branch.row * this.branchSpacing,
                    pushed: isInit
                };
                
                this.commits.push(commit);
                branch.commits.push(commit);
                
                if (!isInit) {
                    this.logCommand(`git commit -m "${message}"`, `[${branchName} ${hash}] ${message}`);
                }
            },

            doPush() {
                const branch = this.branches[this.currentBranch];
                const unpushed = branch.commits.length - branch.pushedCount;
                
                if (unpushed === 0) {
                    this.logCommand('git push', 'Everything up-to-date');
                    return;
                }
                
                // Mark commits as pushed
                for (let i = branch.pushedCount; i < branch.commits.length; i++) {
                    branch.commits[i].pushed = true;
                }
                branch.pushedCount = branch.commits.length;
                
                this.updateUI();
                this.draw();
                this.logCommand(`git push origin ${this.currentBranch}`, 
                    `Pushed ${unpushed} commit(s) to origin/${this.currentBranch}`);
            },

            doPull() {
                this.logCommand(`git pull origin ${this.currentBranch}`, 'Already up to date.');
            },

            doMerge() {
                // Get list of branches to merge from
                const otherBranches = Object.keys(this.branches).filter(b => b !== this.currentBranch);
                
                if (otherBranches.length === 0) {
                    alert('No other branches to merge');
                    return;
                }
                
                const sourceBranch = prompt(`Merge which branch into ${this.currentBranch}?\n\nAvailable: ${otherBranches.join(', ')}`);
                
                if (!sourceBranch || !this.branches[sourceBranch]) {
                    return;
                }
                
                const source = this.branches[sourceBranch];
                const target = this.branches[this.currentBranch];
                
                if (source.commits.length === 0) {
                    this.logCommand(`git merge ${sourceBranch}`, 'Already up to date.');
                    return;
                }
                
                // Create merge commit
                this.commitCounter++;
                const hash = Math.random().toString(16).substr(2, 7);
                
                // Find rightmost position
                let maxX = this.startX;
                for (const commit of this.commits) {
                    if (commit.x > maxX) maxX = commit.x;
                }
                
                const mergeCommit = {
                    id: this.commitCounter,
                    hash: hash,
                    branch: this.currentBranch,
                    message: `Merge ${sourceBranch}`,
                    x: maxX + this.commitSpacing,
                    y: this.startY + target.row * this.branchSpacing,
                    pushed: false,
                    isMerge: true,
                    mergeFrom: source.commits[source.commits.length - 1]
                };
                
                this.commits.push(mergeCommit);
                target.commits.push(mergeCommit);
                
                this.updateUI();
                this.draw();
                this.logCommand(`git merge ${sourceBranch}`, 
                    `Merge made by the 'recursive' strategy.\n [${this.currentBranch} ${hash}] Merge branch '${sourceBranch}'`);
            },

            updateUI() {
                // Update branch selector
                const select = document.getElementById('current-branch-select');
                const currentValue = select.value;
                select.innerHTML = '';
                for (const name of Object.keys(this.branches)) {
                    const opt = document.createElement('option');
                    opt.value = name;
                    opt.textContent = name;
                    if (name === this.currentBranch) opt.selected = true;
                    select.appendChild(opt);
                }
                
                // Update state display
                document.getElementById('head-display').textContent = this.currentBranch;
                document.getElementById('staged-display').textContent = this.stagedFiles + ' file(s)';
                
                const branch = this.branches[this.currentBranch];
                const unpushed = branch.commits.length - branch.pushedCount;
                document.getElementById('unpushed-display').textContent = unpushed + ' commit(s)';
            },

            logCommand(cmd, output) {
                const log = document.getElementById('command-log');
                const entry = document.createElement('div');
                entry.className = 'cmd-entry';
                entry.innerHTML = `
                    <div class="cmd-text">$ ${cmd}</div>
                    <div class="cmd-output">${output.replace(/\n/g, '<br>')}</div>
                `;
                log.appendChild(entry);
                log.scrollTop = log.scrollHeight;
            },

            draw() {
                const ctx = this.ctx;
                const canvas = this.canvas;
                
                // Clear
                ctx.fillStyle = '#0a0a0f';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Draw branch lines
                for (const [name, branch] of Object.entries(this.branches)) {
                    if (branch.commits.length === 0) continue;
                    
                    ctx.strokeStyle = branch.color;
                    ctx.lineWidth = 3;
                    ctx.setLineDash([]);
                    
                    // Draw branch connection from parent if exists
                    if (branch.branchPoint && branch.commits.length > 0) {
                        const bp = branch.branchPoint;
                        const fc = branch.commits[0];
                        
                        ctx.beginPath();
                        ctx.moveTo(bp.x, bp.y);
                        ctx.bezierCurveTo(
                            bp.x + 30, bp.y,
                            fc.x - 30, fc.y,
                            fc.x, fc.y
                        );
                        ctx.stroke();
                    }
                    
                    // Draw commits line
                    if (branch.commits.length > 0) {
                        ctx.beginPath();
                        ctx.moveTo(branch.commits[0].x, branch.commits[0].y);
                        for (let i = 1; i < branch.commits.length; i++) {
                            const c = branch.commits[i];
                            if (c.isMerge && c.mergeFrom) {
                                // Just continue the line normally for merge commits
                                ctx.lineTo(c.x, c.y);
                            } else {
                                ctx.lineTo(c.x, c.y);
                            }
                        }
                        ctx.stroke();
                    }
                }
                
                // Draw merge lines
                for (const commit of this.commits) {
                    if (commit.isMerge && commit.mergeFrom) {
                        const source = commit.mergeFrom;
                        ctx.strokeStyle = this.branches[source.branch].color;
                        ctx.lineWidth = 3;
                        ctx.setLineDash([5, 5]);
                        ctx.beginPath();
                        ctx.moveTo(source.x, source.y);
                        ctx.bezierCurveTo(
                            source.x + 30, source.y,
                            commit.x - 30, commit.y,
                            commit.x, commit.y
                        );
                        ctx.stroke();
                        ctx.setLineDash([]);
                    }
                }
                
                // Draw branch labels
                ctx.font = 'bold 11px JetBrains Mono';
                for (const [name, branch] of Object.entries(this.branches)) {
                    ctx.fillStyle = branch.color;
                    const y = this.startY + branch.row * this.branchSpacing;
                    ctx.fillText(name, 5, y + 4);
                }
                
                // Draw commits
                for (const commit of this.commits) {
                    this.drawCommit(commit);
                }
                
                // Draw HEAD
                const currentBranch = this.branches[this.currentBranch];
                if (currentBranch.commits.length > 0) {
                    const headCommit = currentBranch.commits[currentBranch.commits.length - 1];
                    ctx.fillStyle = '#ffffff';
                    ctx.font = 'bold 10px JetBrains Mono';
                    ctx.textAlign = 'center';
                    ctx.fillText('HEAD', headCommit.x, headCommit.y - 30);
                    
                    // Arrow
                    ctx.beginPath();
                    ctx.moveTo(headCommit.x, headCommit.y - 24);
                    ctx.lineTo(headCommit.x - 5, headCommit.y - 28);
                    ctx.lineTo(headCommit.x + 5, headCommit.y - 28);
                    ctx.closePath();
                    ctx.fill();
                    ctx.textAlign = 'left';
                }
            },

            drawCommit(commit) {
                const ctx = this.ctx;
                const x = commit.x;
                const y = commit.y;
                const r = this.commitRadius;
                const branch = this.branches[commit.branch];
                
                // Glow
                const gradient = ctx.createRadialGradient(x, y, 0, x, y, r * 2);
                gradient.addColorStop(0, branch.color + '30');
                gradient.addColorStop(1, 'transparent');
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(x, y, r * 2, 0, Math.PI * 2);
                ctx.fill();
                
                // Circle
                ctx.beginPath();
                ctx.arc(x, y, r, 0, Math.PI * 2);
                
                if (commit.isMerge) {
                    const grad = ctx.createLinearGradient(x - r, y, x + r, y);
                    grad.addColorStop(0, branch.color);
                    grad.addColorStop(1, this.branches[commit.mergeFrom.branch].color);
                    ctx.fillStyle = grad;
                } else {
                    ctx.fillStyle = branch.color;
                }
                ctx.fill();
                
                // Border - thicker if pushed
                ctx.strokeStyle = commit.pushed ? '#ffffff' : '#666666';
                ctx.lineWidth = commit.pushed ? 3 : 2;
                ctx.stroke();
                
                // Hash
                ctx.fillStyle = '#000000';
                ctx.font = 'bold 9px JetBrains Mono';
                ctx.textAlign = 'center';
                ctx.fillText(commit.hash.substr(0, 4), x, y + 3);
                
                // Message below
                ctx.fillStyle = '#8888aa';
                ctx.font = '9px JetBrains Mono';
                ctx.fillText(commit.message.substr(0, 14), x, y + r + 14);
                ctx.textAlign = 'left';
            }
        };
    </script>
</body>
</html>
